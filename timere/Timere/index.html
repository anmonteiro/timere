<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Timere (timere.Timere)</title><link rel="stylesheet" href="../../odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc 2.1.1"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> â€“ <a href="../index.html">timere</a> &#x00BB; Timere</nav><header class="odoc-preamble"><h1>Module <code><span>Timere</span></code></h1><p>Date time reasoning</p><p>Timere provides a set of highly expressive APIs to describe scheduling constraints, and an efficient resolution algorithm</p></header><nav class="odoc-toc"><ul><li><a href="#basic-constructors">Basic constructors</a></li><li><a href="#pattern-matching-constructors">Pattern matching constructors</a></li><li><a href="#intervals">Intervals</a><ul><li><a href="#explicit-intervals">Explicit intervals</a></li><li><a href="#pattern-matching-intervals">Pattern matching intervals</a></li><li><a href="#hour-minute-second-intervals">Hour minute second intervals</a></li></ul></li><li><a href="#algebraic-operations">Algebraic operations</a><ul><li><a href="#chunking">Chunking</a><ul><li><a href="#chunked-selectors">Chunked selectors</a></li></ul></li></ul></li><li><a href="#infix-operators">Infix operators</a></li><li><a href="#resolution">Resolution</a><ul><li><a href="#s-expressions">S-expressions</a></li></ul></li><li><a href="#misc">Misc</a></li></ul></nav><div class="odoc-content"><div class="odoc-spec"><div class="spec type" id="type-timestamp" class="anchored"><a href="#type-timestamp" class="anchor"></a><code><span><span class="keyword">type</span> timestamp</span><span> = <a href="../../timedesc/Timedesc/index.html#type-timestamp">Timedesc.timestamp</a></span></code></div></div><div class="odoc-spec"><div class="spec type" id="type-t" class="anchored"><a href="#type-t" class="anchor"></a><code><span><span class="keyword">type</span> t</span></code></div><div class="spec-doc"><p>This is the core type of Timere that represents sets of points in time, more precisely, unions of time intervals. For example, &quot;all Mondays of year 2000 at the UTC timezone&quot;.</p><p>We call <code>Timere.t</code> values &quot;timere object&quot;; internally they are rich expressions representing the time computations (union, intersection, etc.), lazily forced into more low-level descriptions (lazy sequences of intervals).</p></div></div><div class="odoc-spec"><div class="spec type" id="type-inc_exc" class="anchored"><a href="#type-inc_exc" class="anchor"></a><code><span><span class="keyword">type</span> inc_exc</span><span> = </span><span>[ </span></code><table><tr id="type-inc_exc.Inc" class="anchored"><td class="def constructor"><a href="#type-inc_exc.Inc" class="anchor"></a><code><span>| </span></code><code><span>`Inc</span></code></td></tr><tr id="type-inc_exc.Exc" class="anchored"><td class="def constructor"><a href="#type-inc_exc.Exc" class="anchor"></a><code><span>| </span></code><code><span>`Exc</span></code></td></tr></table><code><span> ]</span></code></div></div><div class="odoc-spec"><div class="spec type" id="type-range" class="anchored"><a href="#type-range" class="anchor"></a><code><span><span class="keyword">type</span> <span>'a range</span></span><span> = </span><span>[ </span></code><table><tr id="type-range.Range_inc" class="anchored"><td class="def constructor"><a href="#type-range.Range_inc" class="anchor"></a><code><span>| </span></code><code><span>`Range_inc <span class="keyword">of</span> <span class="type-var">'a</span> * <span class="type-var">'a</span></span></code></td></tr><tr id="type-range.Range_exc" class="anchored"><td class="def constructor"><a href="#type-range.Range_exc" class="anchor"></a><code><span>| </span></code><code><span>`Range_exc <span class="keyword">of</span> <span class="type-var">'a</span> * <span class="type-var">'a</span></span></code></td></tr></table><code><span> ]</span></code></div></div><h2 id="basic-constructors"><a href="#basic-constructors" class="anchor"></a>Basic constructors</h2><div class="odoc-spec"><div class="spec value" id="val-now" class="anchored"><a href="#val-now" class="anchor"></a><code><span><span class="keyword">val</span> now : <span>unit <span class="arrow">&#45;&gt;</span></span> <a href="#type-t">t</a></span></code></div><div class="spec-doc"><p>Time right now</p></div></div><div class="odoc-spec"><div class="spec value" id="val-always" class="anchored"><a href="#val-always" class="anchor"></a><code><span><span class="keyword">val</span> always : <a href="#type-t">t</a></span></code></div><div class="spec-doc"><p>Entire interval that Timere can handle, i.e. <code>[0000 Jan 01 14:00:00 +00:00:00, 9999 Dec 31 09:59:58 +00:00:00)</code></p></div></div><div class="odoc-spec"><div class="spec value" id="val-empty" class="anchored"><a href="#val-empty" class="anchor"></a><code><span><span class="keyword">val</span> empty : <a href="#type-t">t</a></span></code></div><div class="spec-doc"><p>Empty interval</p></div></div><div class="odoc-spec"><div class="spec value" id="val-before" class="anchored"><a href="#val-before" class="anchor"></a><code><span><span class="keyword">val</span> before : <span><a href="../../timedesc/Timedesc/index.html#type-t">Timedesc.t</a> <span class="arrow">&#45;&gt;</span></span> <a href="#type-t">t</a></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-since" class="anchored"><a href="#val-since" class="anchor"></a><code><span><span class="keyword">val</span> since : <span><a href="../../timedesc/Timedesc/index.html#type-t">Timedesc.t</a> <span class="arrow">&#45;&gt;</span></span> <a href="#type-t">t</a></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-after" class="anchored"><a href="#val-after" class="anchor"></a><code><span><span class="keyword">val</span> after : <span><a href="../../timedesc/Timedesc/index.html#type-t">Timedesc.t</a> <span class="arrow">&#45;&gt;</span></span> <a href="#type-t">t</a></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-date_time" class="anchored"><a href="#val-date_time" class="anchor"></a><code><span><span class="keyword">val</span> date_time : <span><a href="../../timedesc/Timedesc/index.html#type-t">Timedesc.t</a> <span class="arrow">&#45;&gt;</span></span> <a href="#type-t">t</a></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-date_times" class="anchored"><a href="#val-date_times" class="anchor"></a><code><span><span class="keyword">val</span> date_times : <span><span><a href="../../timedesc/Timedesc/index.html#type-t">Timedesc.t</a> list</span> <span class="arrow">&#45;&gt;</span></span> <a href="#type-t">t</a></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-date_time_seq" class="anchored"><a href="#val-date_time_seq" class="anchor"></a><code><span><span class="keyword">val</span> date_time_seq : <span><span><a href="../../timedesc/Timedesc/index.html#type-t">Timedesc.t</a> <span class="xref-unresolved">Stdlib</span>.Seq.t</span> <span class="arrow">&#45;&gt;</span></span> <a href="#type-t">t</a></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-sorted_date_times" class="anchored"><a href="#val-sorted_date_times" class="anchor"></a><code><span><span class="keyword">val</span> sorted_date_times : <span><span><a href="../../timedesc/Timedesc/index.html#type-t">Timedesc.t</a> list</span> <span class="arrow">&#45;&gt;</span></span> <a href="#type-t">t</a></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-sorted_date_time_seq" class="anchored"><a href="#val-sorted_date_time_seq" class="anchor"></a><code><span><span class="keyword">val</span> sorted_date_time_seq : <span><span><a href="../../timedesc/Timedesc/index.html#type-t">Timedesc.t</a> <span class="xref-unresolved">Stdlib</span>.Seq.t</span> <span class="arrow">&#45;&gt;</span></span> <a href="#type-t">t</a></span></code></div></div><div class="odoc-spec"><div class="spec exception" id="exception-Invalid_timestamp" class="anchored"><a href="#exception-Invalid_timestamp" class="anchor"></a><code><span><span class="keyword">exception</span> </span><span><span class="exception">Invalid_timestamp</span></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-timestamp" class="anchored"><a href="#val-timestamp" class="anchor"></a><code><span><span class="keyword">val</span> timestamp : <span><a href="../../timedesc/Timedesc/index.html#type-timestamp">Timedesc.timestamp</a> <span class="arrow">&#45;&gt;</span></span> <a href="#type-t">t</a></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-before_timestamp" class="anchored"><a href="#val-before_timestamp" class="anchor"></a><code><span><span class="keyword">val</span> before_timestamp : <span><a href="../../timedesc/Timedesc/index.html#type-timestamp">Timedesc.timestamp</a> <span class="arrow">&#45;&gt;</span></span> <a href="#type-t">t</a></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-since_timestamp" class="anchored"><a href="#val-since_timestamp" class="anchor"></a><code><span><span class="keyword">val</span> since_timestamp : <span><a href="../../timedesc/Timedesc/index.html#type-timestamp">Timedesc.timestamp</a> <span class="arrow">&#45;&gt;</span></span> <a href="#type-t">t</a></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-after_timestamp" class="anchored"><a href="#val-after_timestamp" class="anchor"></a><code><span><span class="keyword">val</span> after_timestamp : <span><a href="../../timedesc/Timedesc/index.html#type-timestamp">Timedesc.timestamp</a> <span class="arrow">&#45;&gt;</span></span> <a href="#type-t">t</a></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-timestamps" class="anchored"><a href="#val-timestamps" class="anchor"></a><code><span><span class="keyword">val</span> timestamps : <span>?skip_invalid:bool <span class="arrow">&#45;&gt;</span></span> <span><span><a href="../../timedesc/Timedesc/index.html#type-timestamp">Timedesc.timestamp</a> list</span> <span class="arrow">&#45;&gt;</span></span> <a href="#type-t">t</a></span></code></div><div class="spec-doc"><p><code>timestamps l</code></p><p><code>skip_invalid</code> defaults to <code>false</code></p><ul class="at-tags"><li class="raises"><span class="at-tag">raises</span> <span class="value">Invalid_timestamp</span> <p>if <code>not skip_invalid</code> and <code>l</code> contains an invalid timestamp</p></li></ul></div></div><div class="odoc-spec"><div class="spec value" id="val-timestamp_seq" class="anchored"><a href="#val-timestamp_seq" class="anchor"></a><code><span><span class="keyword">val</span> timestamp_seq : <span>?skip_invalid:bool <span class="arrow">&#45;&gt;</span></span> <span><span><a href="#type-timestamp">timestamp</a> <span class="xref-unresolved">Stdlib</span>.Seq.t</span> <span class="arrow">&#45;&gt;</span></span> <a href="#type-t">t</a></span></code></div><div class="spec-doc"><p><code>timestamps s</code></p><p><code>skip_invalid</code> defaults to <code>false</code></p><ul class="at-tags"><li class="raises"><span class="at-tag">raises</span> <span class="value">Invalid_timestamp</span> <p>if <code>not skip_invalid</code> and <code>s</code> contains an invalid timestamp</p></li></ul></div></div><div class="odoc-spec"><div class="spec value" id="val-sorted_timestamps" class="anchored"><a href="#val-sorted_timestamps" class="anchor"></a><code><span><span class="keyword">val</span> sorted_timestamps : <span>?skip_invalid:bool <span class="arrow">&#45;&gt;</span></span> <span><span><a href="#type-timestamp">timestamp</a> list</span> <span class="arrow">&#45;&gt;</span></span> <a href="#type-t">t</a></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-sorted_timestamp_seq" class="anchored"><a href="#val-sorted_timestamp_seq" class="anchor"></a><code><span><span class="keyword">val</span> sorted_timestamp_seq : <span>?skip_invalid:bool <span class="arrow">&#45;&gt;</span></span> <span><span><a href="#type-timestamp">timestamp</a> <span class="xref-unresolved">Stdlib</span>.Seq.t</span> <span class="arrow">&#45;&gt;</span></span> <a href="#type-t">t</a></span></code></div></div><h2 id="pattern-matching-constructors"><a href="#pattern-matching-constructors" class="anchor"></a>Pattern matching constructors</h2><div class="odoc-spec"><div class="spec value" id="val-pattern" class="anchored"><a href="#val-pattern" class="anchor"></a><code><span><span class="keyword">val</span> pattern : 
  <span>?years:<span>int list</span> <span class="arrow">&#45;&gt;</span></span>
  <span>?year_ranges:<span><span>int <a href="#type-range">range</a></span> list</span> <span class="arrow">&#45;&gt;</span></span>
  <span>?months:<span>int list</span> <span class="arrow">&#45;&gt;</span></span>
  <span>?month_ranges:<span><span>int <a href="#type-range">range</a></span> list</span> <span class="arrow">&#45;&gt;</span></span>
  <span>?days:<span>int list</span> <span class="arrow">&#45;&gt;</span></span>
  <span>?day_ranges:<span><span>int <a href="#type-range">range</a></span> list</span> <span class="arrow">&#45;&gt;</span></span>
  <span>?weekdays:<span><a href="../../timedesc/Timedesc/index.html#type-weekday">Timedesc.weekday</a> list</span> <span class="arrow">&#45;&gt;</span></span>
  <span>?weekday_ranges:<span><span><a href="../../timedesc/Timedesc/index.html#type-weekday">Timedesc.weekday</a> <a href="#type-range">range</a></span> list</span> <span class="arrow">&#45;&gt;</span></span>
  <span>?hours:<span>int list</span> <span class="arrow">&#45;&gt;</span></span>
  <span>?hour_ranges:<span><span>int <a href="#type-range">range</a></span> list</span> <span class="arrow">&#45;&gt;</span></span>
  <span>?minutes:<span>int list</span> <span class="arrow">&#45;&gt;</span></span>
  <span>?minute_ranges:<span><span>int <a href="#type-range">range</a></span> list</span> <span class="arrow">&#45;&gt;</span></span>
  <span>?seconds:<span>int list</span> <span class="arrow">&#45;&gt;</span></span>
  <span>?second_ranges:<span><span>int <a href="#type-range">range</a></span> list</span> <span class="arrow">&#45;&gt;</span></span>
  <span>?ns:<span>int list</span> <span class="arrow">&#45;&gt;</span></span>
  <span>?ns_ranges:<span><span>int <a href="#type-range">range</a></span> list</span> <span class="arrow">&#45;&gt;</span></span>
  <span>unit <span class="arrow">&#45;&gt;</span></span>
  <a href="#type-t">t</a></span></code></div><div class="spec-doc"><p>Pattern matches over date times.</p><p>A pattern <code>p</code> matches date time <code>dt</code> if</p><pre>(year of dt is in p.years or p.year_ranges)
&amp;&amp; (month of dt is in p.months or p.month_ranges)
&amp;&amp; (month day of dt is in p.month_days or p.month_day_ranges)
&amp;&amp; (weekday of dt is in p.weekdays or p.weekday_ranges)
&amp;&amp; (hour of dt is in p.hours or p.hour_ranges)
&amp;&amp; (minute of dt is in p.minutes or p.minute_ranges)
&amp;&amp; (second of dt is in p.seconds or p.second_ranges)
&amp;&amp; (ns of dt is in p.ns or p.ns_ranges)</pre><p>Empty pattern levels are treated as wildcard, e.g. if <code>p.years</code> and <code>p.year_ranges</code> are both empty, then <code>(dt.year is in p.years or p.year_ranges)</code> is <code>true</code>.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-iso_week_pattern" class="anchored"><a href="#val-iso_week_pattern" class="anchor"></a><code><span><span class="keyword">val</span> iso_week_pattern : 
  <span>?years:<span>int list</span> <span class="arrow">&#45;&gt;</span></span>
  <span>?year_ranges:<span><span>int <a href="#type-range">range</a></span> list</span> <span class="arrow">&#45;&gt;</span></span>
  <span>?weeks:<span>int list</span> <span class="arrow">&#45;&gt;</span></span>
  <span>?week_ranges:<span><span>int <a href="#type-range">range</a></span> list</span> <span class="arrow">&#45;&gt;</span></span>
  <span>unit <span class="arrow">&#45;&gt;</span></span>
  <a href="#type-t">t</a></span></code></div><div class="spec-doc"><p>Pattern matches over ISO week date times.</p><p>A pattern <code>p</code> matches ISO week date time <code>dt</code> if</p><pre>(year of dt is in p.years or p.year_ranges)
&amp;&amp; (week of dt is in p.weeks or p.week_ranges)</pre><p>Empty pattern levels are treated as wildcard, e.g. if <code>p.years</code> and <code>p.year_ranges</code> are both empty, then <code>(dt.year is in p.years or p.year_ranges)</code> is <code>true</code>.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-years" class="anchored"><a href="#val-years" class="anchor"></a><code><span><span class="keyword">val</span> years : <span><span>int list</span> <span class="arrow">&#45;&gt;</span></span> <a href="#type-t">t</a></span></code></div><div class="spec-doc"><p><code>years l</code> is a shorthand for <code>pattern ~years:l ()</code></p></div></div><div class="odoc-spec"><div class="spec value" id="val-year_ranges" class="anchored"><a href="#val-year_ranges" class="anchor"></a><code><span><span class="keyword">val</span> year_ranges : <span><span><span>int <a href="#type-range">range</a></span> list</span> <span class="arrow">&#45;&gt;</span></span> <a href="#type-t">t</a></span></code></div><div class="spec-doc"><p><code>year_ranges l</code> is a shorthand for <code>pattern ~year_ranges:l ()</code></p></div></div><div class="odoc-spec"><div class="spec value" id="val-iso_years" class="anchored"><a href="#val-iso_years" class="anchor"></a><code><span><span class="keyword">val</span> iso_years : <span><span>int list</span> <span class="arrow">&#45;&gt;</span></span> <a href="#type-t">t</a></span></code></div><div class="spec-doc"><p><code>iso_years l</code> is a shorthand for <code>iso_week_pattern ~years:l ()</code></p></div></div><div class="odoc-spec"><div class="spec value" id="val-iso_year_ranges" class="anchored"><a href="#val-iso_year_ranges" class="anchor"></a><code><span><span class="keyword">val</span> iso_year_ranges : <span><span><span>int <a href="#type-range">range</a></span> list</span> <span class="arrow">&#45;&gt;</span></span> <a href="#type-t">t</a></span></code></div><div class="spec-doc"><p><code>iso_year_ranges l</code> is a shorthand for <code>iso_week_pattern ~year_ranges:l ()</code></p></div></div><div class="odoc-spec"><div class="spec value" id="val-months" class="anchored"><a href="#val-months" class="anchor"></a><code><span><span class="keyword">val</span> months : <span><span>int list</span> <span class="arrow">&#45;&gt;</span></span> <a href="#type-t">t</a></span></code></div><div class="spec-doc"><p><code>months l</code> is a shorthand for <code>pattern ~months:l ()</code></p></div></div><div class="odoc-spec"><div class="spec value" id="val-month_ranges" class="anchored"><a href="#val-month_ranges" class="anchor"></a><code><span><span class="keyword">val</span> month_ranges : <span><span><span>int <a href="#type-range">range</a></span> list</span> <span class="arrow">&#45;&gt;</span></span> <a href="#type-t">t</a></span></code></div><div class="spec-doc"><p><code>month_ranges l</code> is a shorthand for <code>pattern ~month_ranges:l ()</code></p></div></div><div class="odoc-spec"><div class="spec value" id="val-iso_weeks" class="anchored"><a href="#val-iso_weeks" class="anchor"></a><code><span><span class="keyword">val</span> iso_weeks : <span><span>int list</span> <span class="arrow">&#45;&gt;</span></span> <a href="#type-t">t</a></span></code></div><div class="spec-doc"><p><code>iso_weeks l</code> is a shorthand for <code>iso_week_pattern ~weeks:l ()</code></p></div></div><div class="odoc-spec"><div class="spec value" id="val-iso_week_ranges" class="anchored"><a href="#val-iso_week_ranges" class="anchor"></a><code><span><span class="keyword">val</span> iso_week_ranges : <span><span><span>int <a href="#type-range">range</a></span> list</span> <span class="arrow">&#45;&gt;</span></span> <a href="#type-t">t</a></span></code></div><div class="spec-doc"><p><code>iso_week_ranges l</code> is a shorthand for <code>iso_week_pattern ~week_ranges:l ()</code></p></div></div><div class="odoc-spec"><div class="spec value" id="val-days" class="anchored"><a href="#val-days" class="anchor"></a><code><span><span class="keyword">val</span> days : <span><span>int list</span> <span class="arrow">&#45;&gt;</span></span> <a href="#type-t">t</a></span></code></div><div class="spec-doc"><p><code>days l</code> is a shorthand for <code>pattern ~month_days:l ()</code></p></div></div><div class="odoc-spec"><div class="spec value" id="val-day_ranges" class="anchored"><a href="#val-day_ranges" class="anchor"></a><code><span><span class="keyword">val</span> day_ranges : <span><span><span>int <a href="#type-range">range</a></span> list</span> <span class="arrow">&#45;&gt;</span></span> <a href="#type-t">t</a></span></code></div><div class="spec-doc"><p><code>day_ranges l</code> is a shorthand for <code>pattern ~month_day_ranges:l ()</code></p></div></div><div class="odoc-spec"><div class="spec value" id="val-weekdays" class="anchored"><a href="#val-weekdays" class="anchor"></a><code><span><span class="keyword">val</span> weekdays : <span><span><a href="../../timedesc/Timedesc/index.html#type-weekday">Timedesc.weekday</a> list</span> <span class="arrow">&#45;&gt;</span></span> <a href="#type-t">t</a></span></code></div><div class="spec-doc"><p><code>weekdays l</code> is a shorthand for <code>pattern ~weekdays:l ()</code></p></div></div><div class="odoc-spec"><div class="spec value" id="val-weekday_ranges" class="anchored"><a href="#val-weekday_ranges" class="anchor"></a><code><span><span class="keyword">val</span> weekday_ranges : <span><span><span><a href="../../timedesc/Timedesc/index.html#type-weekday">Timedesc.weekday</a> <a href="#type-range">range</a></span> list</span> <span class="arrow">&#45;&gt;</span></span> <a href="#type-t">t</a></span></code></div><div class="spec-doc"><p><code>weekday_ranges l</code> is a shorthand for <code>pattern ~weekday_ranges:l ()</code></p></div></div><div class="odoc-spec"><div class="spec value" id="val-hours" class="anchored"><a href="#val-hours" class="anchor"></a><code><span><span class="keyword">val</span> hours : <span><span>int list</span> <span class="arrow">&#45;&gt;</span></span> <a href="#type-t">t</a></span></code></div><div class="spec-doc"><p><code>hours l</code> is a shorthand for <code>pattern ~hours:l ()</code></p></div></div><div class="odoc-spec"><div class="spec value" id="val-hour_ranges" class="anchored"><a href="#val-hour_ranges" class="anchor"></a><code><span><span class="keyword">val</span> hour_ranges : <span><span><span>int <a href="#type-range">range</a></span> list</span> <span class="arrow">&#45;&gt;</span></span> <a href="#type-t">t</a></span></code></div><div class="spec-doc"><p><code>hour_ranges l</code> is a shorthand for <code>pattern ~hour_ranges:l ()</code></p></div></div><div class="odoc-spec"><div class="spec value" id="val-minutes" class="anchored"><a href="#val-minutes" class="anchor"></a><code><span><span class="keyword">val</span> minutes : <span><span>int list</span> <span class="arrow">&#45;&gt;</span></span> <a href="#type-t">t</a></span></code></div><div class="spec-doc"><p><code>minutes l</code> is a shorthand for <code>pattern ~minutes:l ()</code></p></div></div><div class="odoc-spec"><div class="spec value" id="val-minute_ranges" class="anchored"><a href="#val-minute_ranges" class="anchor"></a><code><span><span class="keyword">val</span> minute_ranges : <span><span><span>int <a href="#type-range">range</a></span> list</span> <span class="arrow">&#45;&gt;</span></span> <a href="#type-t">t</a></span></code></div><div class="spec-doc"><p><code>minute_ranges l</code> is a shorthand for <code>pattern ~minute_ranges:l ()</code></p></div></div><div class="odoc-spec"><div class="spec value" id="val-seconds" class="anchored"><a href="#val-seconds" class="anchor"></a><code><span><span class="keyword">val</span> seconds : <span><span>int list</span> <span class="arrow">&#45;&gt;</span></span> <a href="#type-t">t</a></span></code></div><div class="spec-doc"><p><code>seconds l</code> is a shorthand for <code>pattern ~seconds:l ()</code></p></div></div><div class="odoc-spec"><div class="spec value" id="val-second_ranges" class="anchored"><a href="#val-second_ranges" class="anchor"></a><code><span><span class="keyword">val</span> second_ranges : <span><span><span>int <a href="#type-range">range</a></span> list</span> <span class="arrow">&#45;&gt;</span></span> <a href="#type-t">t</a></span></code></div><div class="spec-doc"><p><code>second_ranges l</code> is a shorthand for <code>pattern ~second_ranges:l ()</code></p></div></div><div class="odoc-spec"><div class="spec value" id="val-ns" class="anchored"><a href="#val-ns" class="anchor"></a><code><span><span class="keyword">val</span> ns : <span><span>int list</span> <span class="arrow">&#45;&gt;</span></span> <a href="#type-t">t</a></span></code></div><div class="spec-doc"><p><code>ns l</code> is a shorthand for <code>pattern ~ns:l ()</code></p></div></div><div class="odoc-spec"><div class="spec value" id="val-ns_ranges" class="anchored"><a href="#val-ns_ranges" class="anchor"></a><code><span><span class="keyword">val</span> ns_ranges : <span><span><span>int <a href="#type-range">range</a></span> list</span> <span class="arrow">&#45;&gt;</span></span> <a href="#type-t">t</a></span></code></div><div class="spec-doc"><p><code>ns_ranges l</code> is a shorthand for <code>pattern ~ns_ranges:l ()</code></p></div></div><div class="odoc-spec"><div class="spec value" id="val-nth_weekday_of_month" class="anchored"><a href="#val-nth_weekday_of_month" class="anchor"></a><code><span><span class="keyword">val</span> nth_weekday_of_month : <span>int <span class="arrow">&#45;&gt;</span></span> <span><a href="../../timedesc/Timedesc/index.html#type-weekday">Timedesc.weekday</a> <span class="arrow">&#45;&gt;</span></span> <a href="#type-t">t</a></span></code></div><div class="spec-doc"><p><code>nth_weekday_of_month n wday</code> picks the nth weekday of all months, where <code>1 &lt;= n &amp;&amp; n &lt;= 5</code></p><ul class="at-tags"><li class="raises"><span class="at-tag">raises</span> <span class="value">Invalid_argument</span> <p>if <code>n</code> is out of range</p></li></ul></div></div><h2 id="intervals"><a href="#intervals" class="anchor"></a>Intervals</h2><h3 id="explicit-intervals"><a href="#explicit-intervals" class="anchor"></a>Explicit intervals</h3><div class="odoc-spec"><div class="spec exception" id="exception-Interval_is_invalid" class="anchored"><a href="#exception-Interval_is_invalid" class="anchor"></a><code><span><span class="keyword">exception</span> </span><span><span class="exception">Interval_is_invalid</span></span></code></div></div><div class="odoc-spec"><div class="spec exception" id="exception-Intervals_are_not_sorted" class="anchored"><a href="#exception-Intervals_are_not_sorted" class="anchor"></a><code><span><span class="keyword">exception</span> </span><span><span class="exception">Intervals_are_not_sorted</span></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-intervals" class="anchored"><a href="#val-intervals" class="anchor"></a><code><span><span class="keyword">val</span> intervals : <span>?skip_invalid:bool <span class="arrow">&#45;&gt;</span></span> <span><span><a href="../../timedesc/Timedesc/Interval/index.html#type-t">Timedesc.Interval.t</a> list</span> <span class="arrow">&#45;&gt;</span></span> <a href="#type-t">t</a></span></code></div><div class="spec-doc"><p><code>intervals l</code></p><p><code>skip_invalid</code> defaults to <code>false</code></p><ul class="at-tags"><li class="raises"><span class="at-tag">raises</span> <span class="value">Interval_is_invalid</span> <p>if <code>not skip_invalid</code> and <code>l</code> contains an invalid interval</p></li></ul></div></div><div class="odoc-spec"><div class="spec value" id="val-interval_seq" class="anchored"><a href="#val-interval_seq" class="anchor"></a><code><span><span class="keyword">val</span> interval_seq : <span>?skip_invalid:bool <span class="arrow">&#45;&gt;</span></span> <span><span><a href="../../timedesc/Timedesc/Interval/index.html#type-t">Timedesc.Interval.t</a> <span class="xref-unresolved">Stdlib</span>.Seq.t</span> <span class="arrow">&#45;&gt;</span></span> <a href="#type-t">t</a></span></code></div><div class="spec-doc"><p><code>interval_seq s</code></p><p><code>skip_invalid</code> defaults to <code>false</code></p><ul class="at-tags"><li class="raises"><span class="at-tag">raises</span> <span class="value">Interval_is_invalid</span> <p>if <code>not skip_invalid</code> and <code>s</code> contains an invalid interval</p></li></ul></div></div><div class="odoc-spec"><div class="spec value" id="val-sorted_intervals" class="anchored"><a href="#val-sorted_intervals" class="anchor"></a><code><span><span class="keyword">val</span> sorted_intervals : <span>?skip_invalid:bool <span class="arrow">&#45;&gt;</span></span> <span><span><a href="../../timedesc/Timedesc/Interval/index.html#type-t">Timedesc.Interval.t</a> list</span> <span class="arrow">&#45;&gt;</span></span> <a href="#type-t">t</a></span></code></div><div class="spec-doc"><p><code>sorted_intervals l</code></p><p><code>skip_invalid</code> defaults to <code>false</code></p><ul class="at-tags"><li class="raises"><span class="at-tag">raises</span> <span class="value">Interval_is_invalid</span> <p>if <code>not skip_invalid</code> and <code>l</code> contains an invalid interval</p></li></ul><ul class="at-tags"><li class="raises"><span class="at-tag">raises</span> <span class="value">Intervals_are_not_sorted</span> <p>if <code>l</code> is not sorted</p></li></ul></div></div><div class="odoc-spec"><div class="spec value" id="val-sorted_interval_seq" class="anchored"><a href="#val-sorted_interval_seq" class="anchor"></a><code><span><span class="keyword">val</span> sorted_interval_seq : 
  <span>?skip_invalid:bool <span class="arrow">&#45;&gt;</span></span>
  <span><span><a href="../../timedesc/Timedesc/Interval/index.html#type-t">Timedesc.Interval.t</a> <span class="xref-unresolved">Stdlib</span>.Seq.t</span> <span class="arrow">&#45;&gt;</span></span>
  <a href="#type-t">t</a></span></code></div><div class="spec-doc"><p><code>sorted_interval_seq s</code></p><p><code>skip_invalid</code> defaults to <code>false</code></p><ul class="at-tags"><li class="raises"><span class="at-tag">raises</span> <span class="value">Interval_is_invalid</span> <p>if <code>not skip_invalid</code> and <code>s</code> contains an invalid interval</p></li></ul><ul class="at-tags"><li class="raises"><span class="at-tag">raises</span> <span class="value">Intervals_are_not_sorted</span> <p>if <code>s</code> is not sorted</p></li></ul></div></div><h3 id="pattern-matching-intervals"><a href="#pattern-matching-intervals" class="anchor"></a>Pattern matching intervals</h3><p>Pattern matching intervals are designed to handle intervals where start and end points follow some pattern, but cannot be captured by <code>pattern</code> efficiently, e.g. you cannot represent &quot;5:30pm to 6:11pm&quot; via a single <a href="#val-pattern"><code>pattern</code></a></p><div class="odoc-spec"><div class="spec module" id="module-Points" class="anchored"><a href="#module-Points" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Points/index.html">Points</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div></div><div class="odoc-spec"><div class="spec type" id="type-points" class="anchored"><a href="#type-points" class="anchor"></a><code><span><span class="keyword">type</span> points</span><span> = <a href="Points/index.html#type-t">Points.t</a></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-pattern_intervals" class="anchored"><a href="#val-pattern_intervals" class="anchor"></a><code><span><span class="keyword">val</span> pattern_intervals : 
  <span>?inc_exc:<a href="#type-inc_exc">inc_exc</a> <span class="arrow">&#45;&gt;</span></span>
  <span>?bound:<a href="../../timedesc/Timedesc/Span/index.html#type-t">Timedesc.Span.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span>[ `Whole <span>| `Fst</span> <span>| `Snd</span> ]</span> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="#type-points">points</a> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="#type-points">points</a> <span class="arrow">&#45;&gt;</span></span>
  <a href="#type-t">t</a></span></code></div><div class="spec-doc"><p><code>pattern_intervals mode p1 p2</code> for each point <code>x</code> matched by <code>p1</code>, then for the earliest point <code>y</code> matched by <code>p2</code> such that <code>x &lt; y &amp;&amp; y - x &lt;= bound</code></p><ul><li>if <code>mode = `Whole &amp;&amp; inc_exc = `Exc</code>, yields (x, y)</li><li>if <code>mode = `Whole &amp;&amp; inc_exc = `Inc</code>, yields (x, y + 1)</li><li>if <code>mode = `Fst</code>, yields (x, x + 1)</li><li>if <code>mode = `Snd</code>, yields (y, y + 1)</li></ul><p>above implies <code>inc_exc</code> does not impact operations if mode is <code>`Fst</code> or <code>`Snd</code>.</p><p><code>inc_exc</code> defaults to <code>`Exc</code>.</p><p>Default <code>bound</code> is inferred as follows, and should suffice in yielding desired results for most cases:</p><pre>if p2 is YMDHMS then (year of p2 - year of p1 + 1) * 366 days
if p2 is  MDHMS then 366 days
if p2 is   DHMS then
  if day of p1 &lt; day of p2 then 31 - day of p2 days
  else                                      31 days
if p2 is    HMS then  30 hours
if p2 is     MS then   1 hours
if p2 is      S then   1 minutes</pre><p>where we say <code>p2 is YMDHMS</code> if <code>p2 = Points.make_exn ~year:_ ... ()</code> and so on.</p><p>Examples:</p><pre><code>pattern_intervals `Whole
  (Points.make ~hour:13 ~minute:0 ~second:0 ()) (* p1 *)
  (Points.make ~hour:14 ~minute:0 ~second:0 ()) (* p2 *)</code></pre><p>yields all the &quot;1pm to 2pm&quot; intervals, since at each &quot;1pm&quot; mark represented by <code>p1</code>, searching forward up to 24 hour period, we can find a &quot;2pm&quot; mark in <code>p2</code></p><pre><code>pattern_intervals `Whole
  (Points.make ~month:2 ~day:10 ~hour:13 ~minute:0 ~second:0 ()) (* p1 *)
  (Points.make                  ~hour:14 ~minute:0 ~second:0 ()) (* p2 *)</code></pre><p>yields all the &quot;Feb 10th 1pm to 2pm&quot; intervals (or specifically &quot;Feb 10th 1pm to Feb 10th 2pm&quot;)</p><pre><code>pattern_intervals `Whole
  (Points.make ~month:`Feb ~day:10 ~hour:23 ~minute:0 ~second:0 ()) (* p1 *)
  (Points.make                     ~hour:3  ~minute:0 ~second:0 ()) (* p2 *)</code></pre><p>yields all the &quot;Feb 10th 11pm to 3am&quot; intervals (or specifically &quot;Feb 10th 11pm to Feb 11th 3am&quot;)</p><ul class="at-tags"><li class="raises"><span class="at-tag">raises</span> <span class="value">Invalid_argument</span> <p>if bound is negative</p></li></ul><ul class="at-tags"><li class="raises"><span class="at-tag">raises</span> <span class="value">Invalid_argument</span> <p>if precision (number of date time arguments passed to <code>make_points</code> during construction) of <code>p1</code> &lt; precision of <code>p2</code></p><p>For example, <code>Points.make_exn ~hour:3 ~minute:0 ~second:0 ()</code> has a lower precision than <code>make_points_exn ~day:10 ~hour:12 ~minute:30 ~second:0 ()</code>.</p></li></ul></div></div><h3 id="hour-minute-second-intervals"><a href="#hour-minute-second-intervals" class="anchor"></a>Hour minute second intervals</h3><p>Convenience wrappers around <code>points</code> and <code>pattern_intervals</code></p><div class="odoc-spec"><div class="spec value" id="val-hms_intervals" class="anchored"><a href="#val-hms_intervals" class="anchor"></a><code><span><span class="keyword">val</span> hms_intervals : <span>?inc_exc:<a href="#type-inc_exc">inc_exc</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="../../timedesc/Timedesc/Time/index.html#type-t">Timedesc.Time.t</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="../../timedesc/Timedesc/Time/index.html#type-t">Timedesc.Time.t</a> <span class="arrow">&#45;&gt;</span></span> <a href="#type-t">t</a></span></code></div><div class="spec-doc"><p>Same as <code>pattern_intervals ...</code> with bound fixed to <code>Span.For_human.make ~days:1 ()</code></p><p><code>inc_exc</code> defaults to <code>`Exc</code></p></div></div><h2 id="algebraic-operations"><a href="#algebraic-operations" class="anchor"></a>Algebraic operations</h2><div class="odoc-spec"><div class="spec value" id="val-inter" class="anchored"><a href="#val-inter" class="anchor"></a><code><span><span class="keyword">val</span> inter : <span><span><a href="#type-t">t</a> list</span> <span class="arrow">&#45;&gt;</span></span> <a href="#type-t">t</a></span></code></div><div class="spec-doc"><p>Intersection of list of timeres.</p><p><code>inter []</code> is equivalent to <code>always</code>.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-union" class="anchored"><a href="#val-union" class="anchor"></a><code><span><span class="keyword">val</span> union : <span><span><a href="#type-t">t</a> list</span> <span class="arrow">&#45;&gt;</span></span> <a href="#type-t">t</a></span></code></div><div class="spec-doc"><p>Union of list of timeres.</p><p><code>union []</code> is equivalent to <code>empty</code>.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-not" class="anchored"><a href="#val-not" class="anchor"></a><code><span><span class="keyword">val</span> not : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <a href="#type-t">t</a></span></code></div><div class="spec-doc"><p>Negation of timere.</p><p><code>not t</code> is equivalent to all the intervals not included in <code>t</code>.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-shift" class="anchored"><a href="#val-shift" class="anchor"></a><code><span><span class="keyword">val</span> shift : <span><a href="../../timedesc/Timedesc/Span/index.html#type-t">Timedesc.Span.t</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <a href="#type-t">t</a></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-lengthen" class="anchored"><a href="#val-lengthen" class="anchor"></a><code><span><span class="keyword">val</span> lengthen : <span><a href="../../timedesc/Timedesc/Span/index.html#type-t">Timedesc.Span.t</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <a href="#type-t">t</a></span></code></div><div class="spec-doc"><ul class="at-tags"><li class="raises"><span class="at-tag">raises</span> <span class="value">Invalid_argument</span> <p>if duration is negative</p></li></ul></div></div><div class="odoc-spec"><div class="spec value" id="val-with_tz" class="anchored"><a href="#val-with_tz" class="anchor"></a><code><span><span class="keyword">val</span> with_tz : <span><a href="../../timedesc/Timedesc/Time_zone/index.html#type-t">Timedesc.Time_zone.t</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <a href="#type-t">t</a></span></code></div><div class="spec-doc"><p><code>with_tz tz t</code> changes the time zone to evaluate <code>t</code> in to <code>tz</code></p></div></div><h3 id="chunking"><a href="#chunking" class="anchor"></a>Chunking</h3><div class="odoc-spec"><div class="spec type" id="type-chunked" class="anchored"><a href="#type-chunked" class="anchor"></a><code><span><span class="keyword">type</span> chunked</span></code></div></div><div class="odoc-spec"><div class="spec type" id="type-chunking" class="anchored"><a href="#type-chunking" class="anchor"></a><code><span><span class="keyword">type</span> chunking</span><span> = </span><span>[ </span></code><table><tr id="type-chunking.Disjoint_intervals" class="anchored"><td class="def constructor"><a href="#type-chunking.Disjoint_intervals" class="anchor"></a><code><span>| </span></code><code><span>`Disjoint_intervals</span></code></td></tr><tr id="type-chunking.By_duration" class="anchored"><td class="def constructor"><a href="#type-chunking.By_duration" class="anchor"></a><code><span>| </span></code><code><span>`By_duration <span class="keyword">of</span> <a href="../../timedesc/Timedesc/Span/index.html#type-t">Timedesc.Span.t</a></span></code></td></tr><tr id="type-chunking.By_duration_drop_partial" class="anchored"><td class="def constructor"><a href="#type-chunking.By_duration_drop_partial" class="anchor"></a><code><span>| </span></code><code><span>`By_duration_drop_partial <span class="keyword">of</span> <a href="../../timedesc/Timedesc/Span/index.html#type-t">Timedesc.Span.t</a></span></code></td></tr><tr id="type-chunking.At_year_boundary" class="anchored"><td class="def constructor"><a href="#type-chunking.At_year_boundary" class="anchor"></a><code><span>| </span></code><code><span>`At_year_boundary</span></code></td></tr><tr id="type-chunking.At_month_boundary" class="anchored"><td class="def constructor"><a href="#type-chunking.At_month_boundary" class="anchor"></a><code><span>| </span></code><code><span>`At_month_boundary</span></code></td></tr></table><code><span> ]</span></code></div><div class="spec-doc"><p>Ways to chunk/slice time intervals for the selector.</p><ul><li><code>`Disjoint_intervals</code> gives a sequence of disjoint intervals to the selector, specifically they are in ascending order, non-overlapping, non-connecting, and unique</li><li><code>`By_duration</code> slices in the fixed size specified by the duration. Partial chunks (chunks less than the fixed size) are preserved.</li><li><code>`By_duration_drop_partial</code> slices in the fixed size specified by the duration. Partial chunks (chunks less than the fixed size) are discarded.</li><li><code>`At_year_boundary</code> slices at the year boundary (e.g. <code>2021 Jan 1st 00:00:00</code>)</li><li><code>`At_month_boundary</code> slices at the month boundary (e.g. <code>Aug 1st 00:00:00</code>)</li></ul></div></div><div class="odoc-spec"><div class="spec value" id="val-chunk" class="anchored"><a href="#val-chunk" class="anchor"></a><code><span><span class="keyword">val</span> chunk : <span><a href="#type-chunking">chunking</a> <span class="arrow">&#45;&gt;</span></span> <span><span>( <span><a href="#type-chunked">chunked</a> <span class="arrow">&#45;&gt;</span></span> <a href="#type-chunked">chunked</a> )</span> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <a href="#type-t">t</a></span></code></div><div class="spec-doc"><p><code>chunk chunking f t</code> applies <code>chunked</code> selector <code>f</code> on <code>t</code>.</p><ul class="at-tags"><li class="raises"><span class="at-tag">raises</span> <span class="value">Invalid_argument</span> <p>if duration is negative in <code>`By_duration</code> or <code>`By_duration_drop_partial</code></p></li></ul></div></div><h4 id="chunked-selectors"><a href="#chunked-selectors" class="anchor"></a>Chunked selectors</h4><p>You may find <a href="#val-(%&gt;)"><code>(%&gt;)</code></a> useful for chaining selectors together, e.g. <code>drop 5 %&gt; take 2</code></p><div class="odoc-spec"><div class="spec value" id="val-chunk_again" class="anchored"><a href="#val-chunk_again" class="anchor"></a><code><span><span class="keyword">val</span> chunk_again : <span><a href="#type-chunking">chunking</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-chunked">chunked</a> <span class="arrow">&#45;&gt;</span></span> <a href="#type-chunked">chunked</a></span></code></div><div class="spec-doc"><p><code>chunk_again chunking f</code> applies <code>chunked</code> selector <code>f</code> as a selector</p></div></div><div class="odoc-spec"><div class="spec value" id="val-first" class="anchored"><a href="#val-first" class="anchor"></a><code><span><span class="keyword">val</span> first : <span><a href="#type-chunked">chunked</a> <span class="arrow">&#45;&gt;</span></span> <a href="#type-chunked">chunked</a></span></code></div><div class="spec-doc"><p>Takes only first chunk</p></div></div><div class="odoc-spec"><div class="spec value" id="val-take" class="anchored"><a href="#val-take" class="anchor"></a><code><span><span class="keyword">val</span> take : <span>int <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-chunked">chunked</a> <span class="arrow">&#45;&gt;</span></span> <a href="#type-chunked">chunked</a></span></code></div><div class="spec-doc"><p>Takes n chunks</p></div></div><div class="odoc-spec"><div class="spec value" id="val-take_nth" class="anchored"><a href="#val-take_nth" class="anchor"></a><code><span><span class="keyword">val</span> take_nth : <span>int <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-chunked">chunked</a> <span class="arrow">&#45;&gt;</span></span> <a href="#type-chunked">chunked</a></span></code></div><div class="spec-doc"><p>Take every nth chunk, specifically <code>0</code>th, <code>n</code>th, <code>2n</code>th, <code>3n</code>th, ...</p></div></div><div class="odoc-spec"><div class="spec value" id="val-drop" class="anchored"><a href="#val-drop" class="anchor"></a><code><span><span class="keyword">val</span> drop : <span>int <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-chunked">chunked</a> <span class="arrow">&#45;&gt;</span></span> <a href="#type-chunked">chunked</a></span></code></div><div class="spec-doc"><p>Discard n chunks</p></div></div><h2 id="infix-operators"><a href="#infix-operators" class="anchor"></a>Infix operators</h2><div class="odoc-spec"><div class="spec value" id="val-(&amp;&amp;&amp;)" class="anchored"><a href="#val-(&amp;&amp;&amp;)" class="anchor"></a><code><span><span class="keyword">val</span> (&amp;&amp;&amp;) : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <a href="#type-t">t</a></span></code></div><div class="spec-doc"><p><a href="#val-inter"><code>inter</code></a></p></div></div><div class="odoc-spec"><div class="spec value" id="val-(|||)" class="anchored"><a href="#val-(|||)" class="anchor"></a><code><span><span class="keyword">val</span> (|||) : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <a href="#type-t">t</a></span></code></div><div class="spec-doc"><p><a href="#val-union"><code>union</code></a></p></div></div><div class="odoc-spec"><div class="spec value" id="val-(%&gt;)" class="anchored"><a href="#val-(%&gt;)" class="anchor"></a><code><span><span class="keyword">val</span> (%&gt;) : <span><span>( <span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'b</span> )</span> <span class="arrow">&#45;&gt;</span></span> <span><span>( <span><span class="type-var">'b</span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'c</span> )</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'c</span></span></code></div><div class="spec-doc"><p>Composition, mainly for chunked selectors</p><p><code>f1 %&gt; f2</code> is equivalent to <code>fun x -&gt; x |&gt; f1 |&gt; f2</code>.</p></div></div><h2 id="resolution"><a href="#resolution" class="anchor"></a>Resolution</h2><div class="odoc-spec"><div class="spec value" id="val-resolve" class="anchored"><a href="#val-resolve" class="anchor"></a><code><span><span class="keyword">val</span> resolve : 
  <span>?search_using_tz:<a href="../../timedesc/Timedesc/Time_zone/index.html#type-t">Timedesc.Time_zone.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span>( <span><a href="../../timedesc/Timedesc/Interval/index.html#type-t">Timedesc.Interval.t</a> <span class="xref-unresolved">Stdlib</span>.Seq.t</span>, string )</span> <span class="xref-unresolved">Stdlib</span>.result</span></span></code></div><div class="spec-doc"><p>Resolves a Timere object into a concrete interval sequence. * * Intervals are left-closed, right-open, i.e. each interval is * of the form <code>[x, y)</code>, which includes x and excludes y. *</p></div></div><div class="odoc-spec"><div class="spec exception" id="exception-Resolution_error" class="anchored"><a href="#exception-Resolution_error" class="anchor"></a><code><span><span class="keyword">exception</span> </span><span><span class="exception">Resolution_error</span> <span class="keyword">of</span> string</span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-resolve_exn" class="anchored"><a href="#val-resolve_exn" class="anchor"></a><code><span><span class="keyword">val</span> resolve_exn : 
  <span>?search_using_tz:<a href="../../timedesc/Timedesc/Time_zone/index.html#type-t">Timedesc.Time_zone.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../../timedesc/Timedesc/Interval/index.html#type-t">Timedesc.Interval.t</a> <span class="xref-unresolved">Stdlib</span>.Seq.t</span></span></code></div><div class="spec-doc"><ul class="at-tags"><li class="raises"><span class="at-tag">raises</span> <span class="value">Resolution_error</span> <p>if <code>resolve</code> fails</p></li></ul></div></div><h3 id="s-expressions"><a href="#s-expressions" class="anchor"></a>S-expressions</h3><p>These functions are suitable for debugging, serializing and deserializing timeres.</p><p>The sexp is a precise description of the steps used to construct a timere. As such deserialization is accurate and goes through the exact same construction steps (including validation) as one would using the construction API directly.</p><div class="odoc-spec"><div class="spec value" id="val-to_sexp" class="anchored"><a href="#val-to_sexp" class="anchor"></a><code><span><span class="keyword">val</span> to_sexp : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span class="xref-unresolved">Sexplib</span>.Sexp.t</span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-to_sexp_string" class="anchored"><a href="#val-to_sexp_string" class="anchor"></a><code><span><span class="keyword">val</span> to_sexp_string : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> string</span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-of_sexp" class="anchored"><a href="#val-of_sexp" class="anchor"></a><code><span><span class="keyword">val</span> of_sexp : <span><span class="xref-unresolved">Sexplib</span>.Sexp.t <span class="arrow">&#45;&gt;</span></span> <span><span>( <a href="#type-t">t</a>, string )</span> <span class="xref-unresolved">Stdlib</span>.result</span></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-of_sexp_string" class="anchored"><a href="#val-of_sexp_string" class="anchor"></a><code><span><span class="keyword">val</span> of_sexp_string : <span>string <span class="arrow">&#45;&gt;</span></span> <span><span>( <a href="#type-t">t</a>, string )</span> <span class="xref-unresolved">Stdlib</span>.result</span></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-pp_sexp" class="anchored"><a href="#val-pp_sexp" class="anchor"></a><code><span><span class="keyword">val</span> pp_sexp : <span><span class="xref-unresolved">Stdlib</span>.Format.formatter <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> unit</span></code></div></div><h2 id="misc"><a href="#misc" class="anchor"></a>Misc</h2><div class="odoc-spec"><div class="spec module" id="module-Utils" class="anchored"><a href="#module-Utils" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Utils/index.html">Utils</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div></div></div></body></html>